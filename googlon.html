<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" crossorigin="anonymous"></script>
    <script src="googlon.js"></script>
    <title>Googlon</title>
</head>

<body>
    <div class="container mt-5">
        <h1>Is a Googlon text?</h1>
        <p class="text-muted">This algorithm analyzes if the text provided contains Googlon prepositions.</p>
        <label>Please, insert a text to analyze:</label>
        <textarea id="inputText" name="text" style="width: 100%; height: 300px"></textarea>
        <div class="text-right mt-3">
            <button type="button" class="btn btn-primary" onclick="isAGooglonText()">Analyze</button>
        </div>

        <div class="alert mt-3" role="alert" style="display: none;"></div>

        <div id="results" style="display: none;">
            <h3>Results: </h3>
            <table class="table table-bordered">
                <tbody>
                    <tr>
                        <td>Words:</td>
                        <td><span id="words"></span></td>
                    </tr>
                    <tr>
                        <td>Prepositions:</td>
                        <td><span id="prepositions"></span></td>
                    </tr>
                    <tr>
                        <td>Verbs:</td>
                        <td><span id="verbs"></span></td>
                    </tr>
                    <tr>
                        <td>Verbs in first person:</td>
                        <td><span id="firstPersonverbs"></span></td>
                    </tr>
                </tbody>
            </table>
        </div>

    </div>
</body>

</html>

<script>
    const foo = ['s', 'j', 'n', 'c', 'q'];

    $('#inputText').focus(() => {
        $('.alert').hide()
    })

    function isAGooglonText() {
        let input = $('#inputText').val()
        if (!input) {
            $('.alert').removeClass('alert-success').addClass('alert-danger')
            $('.alert').text('Please, insert a valid text')
            $('.alert').show()
            return false
        }
        input = input.replace(/\s+/g, ' ')
        input = input.trim()
        input = input.toLowerCase()
        input = input.split(' ')

        let prepositions = 0
        let verbs = {
            count: 0,
            firstPerson: 0,
        }

        input.forEach(element => {
            const size = element.length
            const lastCharFoo = foo.includes(element[element.length - 1])
            const containsL = element.indexOf('l')

            if (size === 4 && lastCharFoo && (containsL === -1)) {
                prepositions++;
            }

            if (size >= 7 && (!lastCharFoo)) {
                verbs.count++;
                if (foo.includes(element[0])) {
                    verbs.firstPerson++;
                }
            }
        });

        $('#words').text(input.length);
        $('#prepositions').text(prepositions);
        $('#verbs').text(verbs.count);
        $('#firstPersonverbs').text(verbs.firstPerson);

        $('#results').show();
    }
</script>